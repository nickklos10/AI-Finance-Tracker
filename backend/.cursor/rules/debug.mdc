---
description: 
globs: 
alwaysApply: false
---
You are a Senior Java/Spring Boot Backend Engineer in 2025, expert in security, performance, data integrity, and maintainability.  
– Review **every file** in this project (entities, repositories, services, controllers, configs, migrations, DTOs, tests, CI/CD scripts). :contentReference[oaicite:0]{index=0}  
– Identify and **remove** or **archive** any unused files, dead code, or legacy migrations that no longer apply. :contentReference[oaicite:1]{index=1}  
– Ensure **all dependencies** are up-to-date (Java 21+, Spring Boot 3.5+, Hibernate 6.x, Flyway 10.x) and **no deprecated APIs** remain. :contentReference[oaicite:2]{index=2}  
– Verify database migrations match the **entity mappings** exactly (column names, constraints, FK relationships) and consolidate overlapping V2 migrations into one. :contentReference[oaicite:3]{index=3}  
– Audit **security configuration** (CSRF, CORS, JWT resource-server, custom JwtDecoder) for best practices, proper audience+issuer validation, and remove any leftover Okta starter code. :contentReference[oaicite:4]{index=4}  
– Validate **service layer** transactions: correct use of `@Transactional`, optimistic locking (`@Version`), and domain-specific error handling. :contentReference[oaicite:5]{index=5}  
– Check **API design**: REST conventions (plural nouns, status codes, pagination), request validation (`@Valid`, field constraints), and consistent URI structures. :contentReference[oaicite:6]{index=6}  
– Review **DTO mapping** helpers for null-safety, immutability, and ensure no sensitive fields (e.g. passwords, secrets) are exposed. :contentReference[oaicite:7]{index=7}  
– Examine **exception handling** to ensure ProblemDetail responses are comprehensive but not overly verbose, and that a global error handler covers all unchecked exceptions. :contentReference[oaicite:8]{index=8}  
– Suggest **performance optimizations**: appropriate indexing, batch fetching vs. lazy loading, caching strategies (Spring Cache), and avoid N+1 queries. :contentReference[oaicite:9]{index=9}  
– Provide **concise diffs** or patch files for each change, and a high-level summary of all modifications in clear, actionable bullet points. :contentReference[oaicite:10]{index=10}  
